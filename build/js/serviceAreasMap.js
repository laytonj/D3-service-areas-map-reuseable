"use strict";var config={colors:{mapDefault:{style1:"#585858",style2:"#007ABD"}},data:{none:{dropdownName:"None"},data_pctOfPopEligible:{dropdownName:"Percent LSC eligible",tooltipName:"Percent eligible for LSC services",legendName:"Percent eligible for LSC services",type:"percent",format:",.0%",domainMinForTooltip:0,domainMaxForTooltip:null,diverging:!1,colorThresholds:{SA:[.15,.2,.25,.3],ST:[.15,.2,.25,.3]},nationalValue:{SA:.174,ST:.1723},nationalValueType:"median",aboutDataHtml:"<span style='font-weight:bold'>This map shows the percent of people who are eligible for LSC services, those whose household income is below 125% of the Federal Poverty Guidelines.</span><br><span style='font-size:0.77rem; line-spacing: 0.7rem;'>The U.S. Census Bureau provides to LSC population estimates disaggregated at the LSC Service Area and State summary levels, along with estimates of the percent of the population below 125% of the Federal Poverty Guidelines. The data are from the 2018 American Community Survey 1-year population estimates and the 2018 Federal Poverty Guidelines. Summary level data for LSC Service Areas are unpublished, special tabulations made available on LSC's Civil Legal Aid Data site; state summary level information are published by the U.S. Census Bureau and are available at data.census.gov. Data for U.S. territories besides Puerto Rico are from the 2010 Decennial Census (tables PBG83 or PBG77). Data for the independent states of Republic of the Marshall Islands, Federated States of Micronesia, and Republic of Palau come from those countries’ governmental agencies. These independent states are not displayed on the map but are included under \"Micronesia\".</span>"},data_pctChangePopEligible:{dropdownName:"Change in eligible pop",tooltipName:"Percent change in eligible population, '17-'18",legendName:"Percent change in eligible population, 2017 to 2018",type:"percent",format:",.0%",domainMinForTooltip:null,domainMaxForTooltip:null,diverging:!0,colorThresholds:{SA:[-.1,-.05,0,.05],ST:[-.1,-.05,0,.05]},nationalValue:{SA:-.0219,ST:-.02175},nationalValueType:"median",aboutDataHtml:"<span style='font-weight:bold'>This map shows the percent change from 2017 to 2018 in the number of income-eligible people, those whose household income is below 125% of the Federal Poverty Guidelines.</span><br><span style='font-size:0.77rem; line-spacing: 0.7rem;'>The U.S. Census Bureau provides to LSC population estimates disaggregated at the LSC Service Area and State summary levels, along with estimates of the percent of the population below 125% of the Federal Poverty Guidelines. The data are from the 2017 and 2018 American Community Survey 1-year population estimates and the 2017 and 2018 Federal Poverty Guidelines. Summary level data for LSC Service Areas are unpublished, special tabulations made available on LSC's Civil Legal Aid Data site; state summary level information are published by the U.S. Census Bureau and are available at data.census.gov. Data for U.S. territories besides Puerto Rico are from the 2010 Decennial Census (tables PBG83 or PBG77). Data for the independent states of Republic of the Marshall Islands, Federated States of Micronesia, and Republic of Palau come from those countries’ governmental agencies. These independent states are not displayed on the map but are included under \"Micronesia\"</span>."},data_casesPer10K:{dropdownName:"Cases per 10K eligible",tooltipName:"Cases closed per 10,000 eligible people",legendName:"Number of cases closed per 10,000 eligible poeple",type:"number",format:",.0f",domainMinForTooltip:0,domainMaxForTooltip:null,diverging:!1,colorThresholds:{SA:[100,150,200,250],ST:[100,150,200,250]},nationalValue:{SA:129.2,ST:125.05},nationalValueType:"median",aboutDataHtml:"<span style='font-weight:bold'>This map shows the number of Basic Field Grant cases closed per 10,000 income-eligible people, those whose household income is below 125% of the Federal Poverty Guidelines.</span><br><span style='font-size:0.77rem; line-spacing: 0.7rem;'>Case data are from the 2018 Grantee Activity Reports submitted to LSC from each grantee. The U.S. Census Bureau provides to LSC population estimates disaggregated at the LSC Service Area and State summary levels, along with estimates of the percent of the population below 125% of the Federal Poverty Guidelines. The data are from the 2017 and 2018 American Community Survey 1-year population estimates and the 2017 and 2018 Federal Poverty Guidelines. Summary level data for LSC Service Areas are unpublished, special tabulations made available on LSC's Civil Legal Aid Data site; state summary level information are published by the U.S. Census Bureau and are available at data.census.gov. Data for U.S. territories besides Puerto Rico are from the 2010 Decennial Census (tables PBG83 or PBG77). Data for the independent states of Republic of the Marshall Islands, Federated States of Micronesia, and Republic of Palau come from those countries’ governmental agencies. These independent states are not displayed on the map but are included under \"Micronesia\".</span>"}}};!function(){function t(t,e,a,n,r,o,s,l,i){var G=!(0<arguments.length&&void 0!==t)||t,L=!(1<arguments.length&&void 0!==e)||e,C=2<arguments.length&&void 0!==a?a:0,c=!(3<arguments.length&&void 0!==n)||n,D=4<arguments.length&&void 0!==r?r:1,B=!(5<arguments.length&&void 0!==o)||o,u=!(6<arguments.length&&void 0!==s)||s,M=7<arguments.length&&void 0!==l&&l,P=8<arguments.length&&void 0!==i&&i;D="style"+String(D);var I=d3.select("#map");I.attr("class",D);var f=35;!0===G&&(f+=35);var N=parseInt(I.style("width")),k=!0===G?.75*N:.75*N-f,V=I.append("svg").style("overflow","hidden").attr("width",N).attr("height",k),d=V.append("g").attr("id","instructionsG").attr("transform","translate(10, ".concat(k-30,")"));d.append("text").text("".concat(!1===B?"Click a state or service area to see its profile.":"Mouse over an area for more info.")).style("visibility",function(){return 745<N?"visible":"hidden"}).attr("class","instructions ".concat(!1===B?"instructions-bold":"")),d.append("text").text("Drag to pan. Scroll to zoom.").attr("class","instructions").style("visibility",function(){return 745<N?"visible":"hidden"}).attr("transform","translate(0,20)");var p=V.append("g").attr("id","mapZoomSensor"),g=p.append("rect").attr("id","mapZoomRect").attr("class",D).attr("width",N).attr("height",k-f).attr("transform","translate(0,"+f+")"),F=p.append("g").attr("id","mapsG").attr("height",k-f).attr("transform","translate(0,"+f+")"),m=d3.geoAlbersUsaTerritories().translate([N/1.91,(k-f)/2.15]).scale([1.225*N]),R=d3.geoPath().projection(m),h=d3.zoom().scaleExtent([1,20]).translateExtent([[-N/2,-k/2],[1.5*N,1.5*k]]).extent([[0,0],[N,k]]).on("zoom",function(){F.selectAll("path").attr("transform",d3.event.transform),F.selectAll("rect").attr("transform",d3.event.transform),ct.style("pointer-events","auto").transition().duration(1e3).style("opacity",1),kt(),F.selectAll("path").style("pointer-events","none")}).on("end",function(){F.selectAll("path").style("pointer-events","auto"),1==d3.event.transform.k&&0==d3.event.transform.x&&0==d3.event.transform.y&&ct.style("pointer-events","none").transition().duration(1e3).style("opacity",0)});p.call(h);F.append("g").attr("id","baseG");var y,_=F.append("g").attr("id","statesG"),O=F.append("g").attr("id","serviceAreasG");!0===c?y=["MP","PR","VI","AS"]:!1===c&&(y=["GU","MP","PR","VI","AS"]),F.selectAll(".territoryBox").data(y).enter().append("rect").attr("class","territoryBox "+D).attr("id",function(t){return"territoryBox"+t}),d3.select("#territoryBoxMP").attr("height","".concat(!0===c?.22*k:.189*k)).attr("width",.05*N).attr("x",.004*N).attr("y","".concat(!0===G?.335*k:.365*k)),!1===c&&d3.select("#territoryBoxGU").attr("height",.032*(k-f)).attr("width",.05*N).attr("x",.004*N).attr("y","".concat(!0===G?.525*k:.555*k)),d3.select("#territoryBoxAS").attr("height",.04*(k-f)).attr("width",.083*N).attr("x",.004*N).attr("y","".concat(!0===G?.56*k:.59*k)),d3.select("#territoryBoxPR").attr("height",.05*(k-f)).attr("width",.064*N).attr("x",.905*N).attr("y","".concat(!0===G?.75*k:.795*k)),d3.select("#territoryBoxVI").attr("height",.05*(k-f)).attr("width",.025*N).attr("x",.97*N).attr("y","".concat(!0===G?.75*k:.795*k));var v=V.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");v.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",1.8).attr("result","blur"),v.append("feOffset").attr("in","blur").attr("dx",1.8).attr("dy",1.8).attr("result","offsetBlur");var b=v.append("feMerge");b.append("feMergeNode").attr("in","offsetBlur"),b.append("feMergeNode").attr("in","SourceGraphic");var E=!0===L?"SA":"ST",H=150,j=10;if(!0===G)var A=745<N?25:0,T=f/2-5,x=T+23,S=15,w=30,U=745<N?A+85:0,z=($=34)+20,Z=(tt=745<N?U+60:20)+350,W=23,K=f/2+8,Y=Z+45,q=tt+150,J=Y+75,X=830<N?J+145:J+12,Q=830<N?X:J+16;else if(!1===G){var $,tt=N/2-H-5;z=($=4)+20}var et=$+27+2,at=V.append("g").attr("id","menuBarG");at.append("rect").attr("id","menuBarRect").attr("class",D).attr("width",N).attr("height",f);if(1==G){at.append("text").attr("class","selectLayerHeader "+D).text("Select").attr("visibility",function(){return 745<N?"visible":"hidden"}).attr("transform","translate("+A+","+T+")"),at.append("text").attr("class","selectLayerHeader "+D).text("Layers").attr("visibility",function(){return 745<N?"visible":"hidden"}).attr("transform","translate("+A+","+x+")");at.append("path").attr("d","M 0 0 L ".concat(S," ").concat(w/2," L 0 ").concat(w," Z")).attr("id","menuTriangle1").attr("class","menuTriangle "+D).attr("visibility",function(){return 745<N?"visible":"hidden"}).attr("transform","translate(".concat(U,", ").concat(f/2-w/2,")")),at.append("path").attr("d","M 0 0 L ".concat(S," ").concat(w/2," L 0 ").concat(w," Z")).attr("id","menuTriangle2").attr("class","menuTriangle style "+D).attr("transform","translate(".concat(Z,", ").concat(f/2-w/2,")"));at.append("text").attr("class","menuBarText "+D).text(function(){return 745<N?"Geography":"Geography Layer"}).attr("transform","translate("+q+","+W+")")}var nt,rt=at.append("g").attr("class","toggle").attr("id","serviceAreasToggleG").on("mouseover",function(){d3.select("#serviceAreasToggle").classed("toggleHovered",!0)}).on("mouseout",function(){d3.select("#serviceAreasToggle").classed("toggleHovered",!1)}),ot=(rt.append("rect").attr("height","27px").attr("width",H+"px").attr("rx",5).attr("ry",5).attr("id","serviceAreasToggle").attr("class","".concat(!0===L?"mapToggle mapToggled":"mapToggle"," ").concat(D)).attr("transform","translate(".concat(!0===L?tt:tt+H+j,",").concat($,")")),rt.append("text").text("Service Areas").attr("id","serviceAreasToggleText").attr("class","".concat(!0===L?"toggleText mapToggledText":"toggleText"," ").concat(D)).attr("transform","translate(".concat(!0===L?tt+75:tt+H+j+75,",").concat(z,")")),at.append("g").attr("class","toggle").attr("id","statesToggleG").on("mouseover",function(){d3.select("#statesToggle").classed("toggleHovered",!0)}).on("mouseout",function(){d3.select("#statesToggle").classed("toggleHovered",!1)}));ot.append("rect").attr("height","27px").attr("width",H+"px").attr("rx",5).attr("ry",5).attr("id","statesToggle").attr("class","".concat(!1===L?"mapToggle mapToggled":"mapToggle"," ").concat(D)).attr("transform","translate(".concat(!1===L?tt:tt+H+j,",").concat($,")")),ot.append("text").text("States & Territories").attr("id","statesToggleText").attr("class","".concat(!1===L?"toggleText mapToggledText":"toggleText"," ").concat(D)).attr("transform","translate(".concat(!1===L?tt+75:tt+H+j+75,",").concat(z,")"));"style2"===D&&(nt=at.append("rect").attr("id","slidingBorder").attr("class",D).attr("height",6).attr("width",H).attr("transform","translate(".concat(tt,",").concat(et,")")));var st,lt="none";if(1==G){at.append("text").text(function(){return 745<N?"Map Data":"Data Layer"}).attr("class","menuBarText "+D).attr("transform","translate("+J+","+W+")"),(st=I.append("select").attr("id","dataSelect").attr("class","dropdown select-css").style("left",Y+"px").style("top",K+"px")).selectAll("option").data(Object.keys(config.data)).enter().append("option").text(function(t){return config.data[t].dropdownName}).attr("value",function(t){return t}),lt=document.getElementById("dataSelect").value;var it=at.append("g");it.append("text").attr("class","aboutDataLabel ".concat(D).concat(N<830?" aboutLabelLower":"")).text("About this").style("text-anchor","".concat(830<N?"middle":"end")).attr("transform","translate(".concat(X,", ").concat(830<N?30:f+20,")")),it.append("text").attr("class","aboutDataLabel ".concat(D).concat(N<830?" aboutLabelLower":"")).text("data...").style("text-anchor","".concat(830<N?"middle":"start")).attr("transform","translate(".concat(Q,", ").concat(830<N?50:f+20,")"));it.on("mouseover",function(){d3.select("#aboutDataDiv").transition().duration(500).style("opacity",1)}).on("mouseout",function(){d3.select("#aboutDataDiv").transition().duration(500).style("opacity",0)});I.append("div").attr("id","aboutDataDiv").attr("class",D).style("position","absolute").style("width","400px").style("height","auto").style("top","".concat(830<N?f+15:f+30,"px")).style("right","".concat(830<N?15:30,"px")).html("")}var ct=V.append("g").attr("id","resetG").attr("transform","translate(28, ".concat(f+40,")")).style("opacity",0).style("pointer-events","none").on("mouseover",function(){kt()}).on("click",function(){p.transition().duration(750).call(h.transform,d3.zoomIdentity),ft=setTimeout(function(){d3.selectAll(".tooltip").style("display","none").style("opacity",0)},ht),clearTimeout(ut),d3.select(Dt).classed("selected",!1)});ct.append("rect").attr("width",130).attr("height",40).style("fill","#fff").attr("rx",10).attr("ry",10).attr("transform","translate(-22, -33)");ct.append("text").attr("text-anchor","middle").attr("class","fa resetZoomIcon").style("font-size","40px").text(""),ct.append("text").text("Reset pan").attr("id","resetZoomText1").attr("class","resetZoomText").attr("transform","translate(61,-17)"),ct.append("text").text("and zoom").attr("id","resetZoomText2").attr("class","resetZoomText").attr("transform","translate(61,-2)");var dt,pt=N<670?N/2-250:N-500;if(!0===G){(dt=V.append("g").attr("id","legendG").on("mouseover",function(){kt()})).append("rect").attr("id","legendBkgdRect").attr("width",500).attr("height",55).attr("rx",2).attr("ry",2).attr("transform","translate(".concat(pt-5,", ").concat(k-55-3,")"));dt.append("text").text("People per capita").attr("id","legendTitle").style("text-anchor","middle").attr("transform","translate(".concat(250+pt,", ").concat(k-40,")"));dt.selectAll(".legendItem").data([1,2,3,4,5]).enter().append("g").attr("class","legendItems").attr("id",function(t,e){return"legendItem".concat(String(e+1))}).attr("transform",function(t,e){return"translate(".concat(pt+100*e,", ").concat(k-15,")")}).each(function(t,e){d3.select(this).append("rect").attr("class","legendBackgroundRect").attr("width",100).attr("height",25).style("fill","#fff").style("opacity",0).attr("transform",function(t){return"translate(0, ".concat(-25,")")}),d3.select(this).append("rect").attr("class","legendRect").attr("width",90).attr("height",8).attr("id",function(t){return"legendRect".concat(String(t))}),d3.select(this).append("text").text(function(t){return t}).attr("class","legendValues").attr("id",function(t){return"legendValue".concat(String(t))}).attr("transform",function(t){return"translate(".concat(45,", ").concat(-5,")")}),d3.select(this).on("mouseover",function(t){d3.selectAll(".dataLayer:not(.group".concat(t,")")).classed("legendHoveredNo",!0)}).on("mouseout",function(t){d3.selectAll(".dataLayer:not(.group".concat(t,")")).classed("legendHoveredNo",!1)})})}var ut,ft,gt,mt,ht,yt=!0===P?150:220,vt={right:15,left:-(yt+15)};!0===B?(gt=600,mt=500,ht=599):!1===B&&(gt=400,mt=250,ht=99);var bt,At=15,Tt=25,xt=5,St=2*Tt+xt,wt=d3.scaleLinear().domain([0,.5]);V.on("mousemove",function(){bt=d3.mouse(this)});var Gt=["#73d487","#30b096","#288993","#40607a","#453b52"],Lt=["#E56153","#FD9D62","#FFC479","#288993","#40607a"],Ct=d3.scaleThreshold();queue().defer(d3.json,"geo_data/service_areas_topojson_2020_01_16.json").defer(d3.json,"geo_data/mapAreasData_keyed.json").await(function(t,a,e){if(t)throw t;var n=topojson.feature(a,a.objects.service_areas).features;n.forEach(function(t){t.properties=Object.assign({},t.properties,e[t.properties.ServArea_1])});var r,o=[],s=!0,l=!1,i=void 0;try{for(var c,d=n[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;o.push(p.properties.ServArea_1)}}catch(t){l=!0,i=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw i}}r=["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"];var u=d3.entries(e).filter(function(t){return r.includes(t.key)}),f=d3.entries(e).filter(function(t){return!r.includes(t.key)}),g=[],m=!0,h=!1,y=void 0;try{for(var v,b=function(){var e=v.value,t=topojson.merge(a,a.objects.service_areas.geometries.filter(function(t){return t.properties.StAbbrev==e}));t.stAbbrev=e,g.push(t)},A=r[Symbol.iterator]();!(m=(v=A.next()).done);m=!0)b()}catch(t){h=!0,y=t}finally{try{m||null==A.return||A.return()}finally{if(h)throw y}}g.forEach(function(t){t.properties=e[t.stAbbrev]}),_.selectAll(".states").append("path").data(g).enter().append("path").attr("id",function(t){return t.stAbbrev}).attr("class","geo states dataLayer nonScaling "+D).attr("d",function(t){return R(t)}),O.selectAll("path").data(n).enter().append("path").attr("id",function(t){return t.properties.ServArea_1}).attr("class","geo serviceAreas dataLayer nonScaling "+D).attr("d",R),F.append("path").datum(topojson.mesh(a,a.objects.service_areas,function(t,e){return t.properties.StAbbrev!==e.properties.StAbbrev})).attr("class","geo stateInteriorMesh nonScaling").attr("d",R),!0===G&&Mt("SA"==E?f:u);Pt();var T,x=I.selectAll(".tooltip").data(o.concat(r)).enter().append("div").attr("class","tooltip".concat(!0===P?" tipTitleOnly":"")).attr("id",function(t){return t+"-tip"}).style("width",yt+"px").style("height","auto");x.append("p").attr("class","tipHeaderP "+D).append("span").attr("class","tipHeaderSpan").text(function(t){return e[t].name}),!1===B&&(d3.selectAll(".tooltip").style("pointer-events","none"),d3.selectAll(".geo, .territoryBox").style("cursor","pointer"));!1===P&&((T=x.append("div").attr("class","tipDataDiv").style("display","none")).append("p").attr("class","tipGraphHeader"),T.append("p").attr("class","tipGraphCategory").html(function(t){return"This area (".concat(t,")")}).style("padding-left",At+"px"),T.append("svg").attr("class","tipGraphSvg").attr("height",St+"px").attr("width",yt+"px"),T.append("p").attr("class","tipGraphCategory tipNationalLabel").style("padding-left",At+"px"),T.append("p").attr("class","tipGraphFootnote"),x.append("div").attr("class","tipContentDiv tipInfoSection").append("div").attr("class","tipLink").html(function(t){return r.includes(t)&&"org"==e[t].profileType?'<a href="'+e[t].link+"\"><span>See the sole grantee's profile</span></a>":r.includes(t)?'<a href="'+e[t].link+'"><span>See the aggregate state profile</span></a>':'<a href="'+e[t].link+"\"><span>See this grantee's profile</span></a>"}));d3.selectAll(".states").on("click",function(t){!1===B&&window.open(t.properties.link,"_blank"),!0===M&&Bt(t,"ST")}).on("mouseover",function(t){It(t,"ST"),clearTimeout(ut),Vt(t,"ST")}).on("mouseout",function(t){Nt(t,"ST")}),d3.selectAll(".serviceAreas").on("click",function(t){!1===B&&window.open(t.properties.link,"_blank"),!0===M&&Bt(t,"SA")}).on("mouseover",function(t){It(t,"SA"),clearTimeout(ut),Vt(t,"SA")}).on("mouseout",function(t){Nt(t,"SA")}),d3.selectAll(".territoryBox").each(function(t){d3.select(this).on("click",function(t){!1===B&&window.open(e[t].link,"_blank")}).on("mouseover",function(t){"SA"==E?(It(d3.select("#".concat(t,"-1")).data()[0],"SA"),clearTimeout(ut),Vt(d3.select("#".concat(t,"-1")).data()[0],"SA")):(It(d3.select("#".concat(t)).data()[0],"ST"),clearTimeout(ut),Vt(d3.select("#".concat(t)).data()[0],"ST")),d3.select(this).classed("hoveredBox",!0)}).on("mouseout",function(t){"SA"==E?Nt(d3.select("#".concat(t,"-1")).data()[0],"SA"):Nt(d3.select("#".concat(t)).data()[0],"ST"),d3.select(this).classed("hoveredBox",!1)})});function S(){"style2"===D&&nt.transition().duration(1e3).ease(d3.easeCubicInOut).attr("transform","translate(".concat(!0===L?tt:tt+H+j,",").concat(et,")")),d3.selectAll(".serviceAreas").classed("inactiveLayer",!1),d3.selectAll(".states").classed("inactiveLayer",!0),d3.select("#serviceAreasToggle").classed("mapToggled",!0),d3.select("#statesToggle").classed("mapToggled",!1),d3.select("#serviceAreasToggleText").classed("mapToggledText",!0),d3.select("#statesToggleText").classed("mapToggledText",!1),E="SA",!0===G&&(Mt(f),Pt())}function w(){"style2"===D&&nt.transition().duration(1e3).ease(d3.easeCubicInOut).attr("transform","translate(".concat(!1===L?tt:tt+H+j,",").concat(et,")")),d3.selectAll(".states").classed("inactiveLayer",!1),d3.selectAll(".serviceAreas").classed("inactiveLayer",!0),d3.select("#serviceAreasToggle").classed("mapToggled",!1),d3.select("#statesToggle").classed("mapToggled",!0),d3.select("#serviceAreasToggleText").classed("mapToggledText",!1),d3.select("#statesToggleText").classed("mapToggledText",!0),E="ST",!0===G&&(Mt(u),Pt())}rt.on("click",function(){S()}),ot.on("click",function(){w()}),!0===L?S():!1===L&&w();!0===G&&st.on("change",function(t){lt=document.getElementById("dataSelect").value,Mt("SA"==E?f:u),Pt(!0),"none"!=lt?(d3.selectAll(".aboutDataLabel").style("pointer-events","auto").transition().duration(2e3).style("opacity",1),d3.select("#aboutDataDiv").html(config.data[lt].aboutDataHtml)):d3.selectAll(".aboutDataLabel").style("pointer-events","none").transition().duration(2e3).style("opacity",0).transition()});0<C?function(t){V.append("rect").attr("width",N).attr("height",k).attr("id","initOverlay").style("opacity",0).style("z-index",100).transition().delay(2100).style("pointer-events","none"),d3.select("#dataSelect").style("pointer-events","none").transition().delay(2100).style("pointer-events","auto"),1===C&&(d3.selectAll(".geo").attr("opacity",0),d3.selectAll(".geo").transition().duration(2e3).ease(d3.easeCubicInOut).style("opacity",1));2===C&&(d3.selectAll(".geo").attr("transform","translate(25,20)scale(0.90)"),d3.selectAll(".geo").transition().duration(2e3).ease(d3.easeCubicInOut).attr("transform","scale(1)"));10===C&&(d3.selectAll(".geo").style("opacity",0).attr("transform","scale(0.6)rotate(-180)"),d3.selectAll(".geo").transition().delay(200).duration(7e3).ease(d3.easeBounceOut).style("opacity",1).attr("transform","scale(1)"));11===C&&(d3.selectAll("".concat(!0===L?".serviceAreas":".states")).style("stroke-width",100),d3.selectAll("".concat(!0===L?".serviceAreas":".states")).transition().duration(3e3).ease(d3.easeCubicInOut).style("stroke-width",.5));var e=d3.timer(function(){e.stop(),d3.selectAll(".territoryBox").transition().duration(1e3).style("stroke-opacity",1),d3.select("#baseG").append("path").datum(topojson.merge(t,t.objects.service_areas.geometries)).attr("class","baseLayer").attr("d",R).attr("class","basePath").style("filter","url(#drop-shadow)").style("opacity",0).transition().duration(1e3).style("opacity",1),Ft=!0},2e3)}(a):0===C&&d3.selectAll(".territoryBox").style("stroke-opacity",1)});var Dt="AK";function Bt(t,e){var a;d3.select(Dt).classed("selected",!1),"ST"==e?a="#".concat(t.stAbbrev):"SA"==e&&(a="#".concat(t.properties.ServArea_1)),Dt=a,d3.select(Dt).classed("selected",!0);var n=R.bounds(t),r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],s=(n[0][0]+n[1][0])/2,l=(n[0][1]+n[1][1])/2,i=Math.max(1,Math.min(8,.9/Math.max(r/N,o/k))),c=[N/2-i*s,k/2-i*l];p.transition().duration(750).call(h.transform,d3.zoomIdentity.translate(c[0],c[1]).scale(i))}function Mt(t){if("none"==lt)return d3.select("#legendTitle").transition().duration(1500).delay(0).style("opacity",0),d3.select("#legendBkgdRect").style("pointer-events","none").transition().duration(1500).delay(0).style("opacity",0),void d3.selectAll(".legendItems").style("pointer-events","none").transition().duration(1e3).delay(function(t,e){return 100*(d3.selectAll(".legendItems").size()+2-e)}).style("opacity",0);var a;if(!0===G){a=1==config.data[lt].diverging?Lt:Gt,Ct.range(a).domain(config.data[lt].colorThresholds[E]),d3.selectAll(".legendRect").data(a).style("fill",function(t,e){return a[e]});var e,n=d3.format(config.data[lt].format);e="percent"==config.data[lt].type?.01:1,d3.select("#legendValue1").text("< ".concat(n(config.data[lt].colorThresholds[E][0]))),d3.select("#legendValue2").text("".concat(n(config.data[lt].colorThresholds[E][0])," to ").concat(n(config.data[lt].colorThresholds[E][1]-e))),d3.select("#legendValue3").text("".concat(n(config.data[lt].colorThresholds[E][1])," to ").concat(n(config.data[lt].colorThresholds[E][2]-e))),d3.select("#legendValue4").text("".concat(n(config.data[lt].colorThresholds[E][2])," to ").concat(n(config.data[lt].colorThresholds[E][3]-e))),d3.select("#legendValue5").text("".concat(n(config.data[lt].colorThresholds[E][3])," +")),d3.select("#legendTitle").text(config.data[lt].legendName),d3.selectAll(".legendItems").style("pointer-events","auto").transition().duration(1e3).delay(function(t,e){return 300+100*e}).style("opacity",1),d3.select("#legendTitle").transition().duration(1e3).delay(500).style("opacity",1),d3.select("#legendBkgdRect").style("pointer-events","auto").transition().duration(1e3).delay(500).style("opacity",.75),"SA"==E?d3.selectAll(".geo.serviceAreas").attr("class",function(t){return"geo serviceAreas dataLayer nonScaling group".concat(a.indexOf(Ct(t.properties[lt]))+1)}):d3.selectAll(".geo.states").attr("class",function(t){return"geo states dataLayer nonScaling group".concat(a.indexOf(Ct(t.properties[lt]))+1)});var r,o=-99999999,s=999999999;if(null!=config.data[lt].domainMaxForTooltip)o=config.data[lt].domainMaxForTooltip;else{var l=!0,i=!1,c=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var u=d.value;u.value[lt]>o&&(o=u.value[lt])}}catch(t){i=!0,c=t}finally{try{l||null==p.return||p.return()}finally{if(i)throw c}}}if(null!=config.data[lt].domainMinForTooltip)s=config.data[lt].domainMinForTooltip;else{var f=!0,g=!1,m=void 0;try{for(var h,y=t[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var v=h.value;v.value[lt]<s&&(s=v.value[lt])}}catch(t){g=!0,m=t}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}1==config.data[lt].diverging?(r=Math.max(Math.abs(s),Math.abs(o)),wt.rangeRound([0,.7*yt]).domain([-r,r])):wt.rangeRound([0,.7*yt]).domain([s,o])}}function Pt(t){var e=0;e=1==(0<arguments.length&&void 0!==t&&t)?500:0,"none"!=lt?"SA"==E?d3.selectAll(".geo.serviceAreas").transition().duration(e).style("fill",function(t){return Ct(t.properties[lt])}):d3.selectAll(".geo.states").transition().duration(e).style("fill",function(t){return Ct(t.properties[lt])}):d3.selectAll(".geo.serviceAreas, .geo.states").transition().duration(e).style("fill",config.colors.mapDefault[D])}function It(t,e){var a;"ST"==e?a="#"+t.stAbbrev:"SA"==e&&(a="#"+t.properties.ServArea_1),d3.select(a).classed("hovered",!0),!0===c&&("#MP-1"==a?d3.select("#GU-1").classed("hovered",!0):"#MP"==a&&d3.select("#GU").classed("hovered",!0))}function Nt(t,e){var a;"ST"==e?a=".states":"SA"==e&&(a=".serviceAreas"),d3.selectAll(a).classed("hovered",!1)}function kt(){ft=setTimeout(function(){d3.selectAll(".tooltip").style("display","none").style("opacity",0)},ht),clearTimeout(ut)}function Vt(t,e){var a,n;"ST"==e?a="#"+t.stAbbrev:"SA"==e&&(a="#"+t.properties.ServArea_1),"ST"==e?n=t.stAbbrev+"-tip":"SA"==e&&(n=t.properties.ServArea_1+"-tip");var r,o="#"+n,s=d3.select(o);if(!0===G)if("none"!=lt){s.select(".tipGraphHeader").html(config.data[lt].tooltipName),s.select(".tipNationalLabel").html("National ".concat(null==config.data[lt].nationalValueType?"":config.data[lt].nationalValueType)),s.selectAll(".tipDataDiv").style("display","block"),"data_pctOfPopEligible"==lt?(s.select(".tipGraphFootnote").style("display","block").html("*"+d3.format(",")(t.properties.data_popEligible)+" people"),s.select(".tipNationalLabel").style("margin-bottom",0)):(s.select(".tipGraphFootnote").style("display","none"),s.select(".tipNationalLabel").style("margin-bottom","10px"));var l,i=Ct(t.properties[lt]),c=Math.abs(wt(0)-wt(t.properties[lt])),d=Math.abs(wt(0)-wt(config.data[lt].nationalValue[E]));s.selectAll(".tipGraphItems").remove(),s.select("svg").append("rect").attr("class","tipGraphBar1 tipGraphItems").attr("width",0).attr("height",Tt).style("fill",i).attr("transform","translate(".concat(At+wt(0),", 0)")),s.select("svg").append("rect").attr("class","tipGraphBar2 tipGraphItems").attr("width",0).attr("height",Tt).style("fill","#b4b4b4").attr("transform","translate(".concat(At+wt(0),", ").concat(xt+Tt,")")),l="data_pctOfPopEligible"==lt?"*":"",s.select("svg").append("text").text(d3.format(config.data[lt].format)(t.properties[lt])+l).attr("class","tipGraphValue1 tipGraphItems tipGraphValues").style("fill",i).style("font-weight","bold"),s.select("svg").append("text").text(d3.format(config.data[lt].format)(config.data[lt].nationalValue[E])).attr("class","tipGraphValue2 tipGraphItems tipGraphValues").style("fill","#b4b4b4").style("font-weight","bold"),s.select("rect.tipGraphBar1").transition().delay(gt).duration(1500).attr("width",c).attr("transform","translate(".concat(t.properties[lt]<0?At+wt(0)-c:At+wt(0),", 0)")),s.select("rect.tipGraphBar2").transition().delay(gt).duration(1500).attr("width",d).attr("transform","translate(".concat(config.data[lt].nationalValue[E]<0?At+wt(0)-d:At+wt(0),", ").concat(xt+Tt,")")),s.select("text.tipGraphValue1").attr("transform","translate(".concat(At+wt(0)+5,", ").concat(.7*Tt,")")).transition().delay(gt).duration(1500).attr("transform","translate(".concat(t.properties[lt]<0?At+wt(0)+5:At+wt(0)+5+c,", ").concat(.7*Tt,")")),s.select("text.tipGraphValue2").attr("transform","translate(".concat(At+wt(0)+5,", ").concat(xt+1.7*Tt,")")).transition().delay(gt).duration(1500).attr("transform","translate(".concat(config.data[lt].nationalValue[E]<0?At+wt(0)+5:At+wt(0)+5+d,", ").concat(xt+1.7*Tt,")"))}else s.selectAll(".tipDataDiv").style("display","none");else s.selectAll(".tipDataDiv").style("display","none");var p=(r="SA"==E?R.bounds(t.geometry):R.bounds(t))[1][1]-r[0][1];ft=setTimeout(function(){d3.selectAll(".tooltip").style("display","none").style("opacity",0)},ht),ut=setTimeout(function(){s.style("display","block");var t=bt[0],e=bt[1];t<N/2?s.style("left",t+vt.right+"px"):s.style("left",t+vt.left+"px");var a=s.node().getBoundingClientRect().height;!0===u&&(e<f+(k-f)/3?s.style("top","".concat(e+.05*a,"px")):e<f+(k-f)/3*2?s.style("top","".concat(e-a/4,"px")):s.style("top","".concat(e-.8*a,"px"))),!1===u&&(t<N/2?s.style("left","".concat(r[1][0]+5,"px")):s.style("left","".concat(r[0][0]-5-yt,"px")),e<f+(k-f)/3?s.style("top","".concat(f+r[0][1]+.1*a,"px")):e<f+(k-f)/3*2?s.style("top","".concat(f+r[0][1]+p/2-a/3,"px")):s.style("top","".concat(f+r[0][1]-.8*a,"px"))),s.transition().duration(mt).style("opacity",1)},gt),s.on("mouseover",function(){clearTimeout(ut),clearTimeout(ft),d3.select(a).classed("hovered",!0)}).on("mouseout",function(){d3.selectAll("path").classed("hovered",!1),kt()})}function kt(){ft=setTimeout(function(){d3.selectAll(".tooltip").style("display","none").style("opacity",0)},ht),clearTimeout(ut)}g.on("mouseover",function(){kt()}),at.on("mouseover",function(){kt()})}var e,Ft=!0,a=document.getElementById("map").offsetWidth;function n(){var t=document.getElementById("map").offsetWidth;t!=a&&(a=t,r())}function r(){600<document.getElementById("map").offsetWidth&1==Ft?(d3.select("#map").selectAll("*").remove(),d3.select("#map").style("visibility","visible"),t(Ft=!1,!1,1,!1,2,!1,!0,!1,!0)):document.getElementById("map").offsetWidth<=600&&(d3.select("#map").selectAll("*").remove(),d3.select("#map").style("visibility","hidden"))}window.onresize=function(){clearTimeout(e),e=setTimeout(n,200)},r()}();